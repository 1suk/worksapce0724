--계정생성
CREATE USER C##WS IDENTIFIED BY WS;

GRANT CONNECT, RESOURCE TO C##WS;

CREATE TABLE TEACHER(
    TEACHER_ID NUMBER PRIMARY KEY,
    NAME VARCHAR2(20) NOT NULL,
    EMAIL VARCHAR2(30) CONSTRAINT EMAIL_UQ UNIQUE,
    HIRE_DATE DATE,
    SUBJECT VARCHAR2(20)
);

INSERT INTO TEACHER(TEACHER_ID, NAME, EMAIL, HIRE_DATE, SUBJECT)
VALUES (1, '김민수', 'minsoo@gmail.com', '2020-03-01', '컴퓨터공학');

INSERT INTO TEACHER(TEACHER_ID, NAME, EMAIL, HIRE_DATE, SUBJECT)
VALUES (2, '이지은', 'jieun@gmail.com', '2019-09-15', '컴퓨터공학');

INSERT INTO TEACHER(TEACHER_ID, NAME, EMAIL, HIRE_DATE, SUBJECT)
VALUES (3, '박찬열', 'chanyeol@gmail.com', '2021-01-10', 'SW공학');

INSERT INTO TEACHER(TEACHER_ID, NAME, EMAIL, HIRE_DATE, SUBJECT)
VALUES (4, '최수영', 'sooyoung@gmail.com', '2018-07-20', 'SW공학');

INSERT INTO TEACHER(TEACHER_ID, NAME, EMAIL, HIRE_DATE, SUBJECT)
VALUES (5, '정호석', 'hoseok@gmail.com', '2022-05-05', '빅데이터공학');

SELECT * FROM TEACHER;

CREATE TABLE LECTURE(
    LECTURE_ID NUMBER PRIMARY KEY,
    TITLE VARCHAR2(30) NOT NULL,
    TEACHER_ID NUMBER,
    INDEX_COUNT NUMBER DEFAULT 0,
    CATEGORY VARCHAR2(30),
    START_DATE DATE,
    END_DATE DATE,
    FOREIGN KEY(TEACHER_ID) REFERENCES TEACHER ON DELETE SET NULL
);

INSERT INTO LECTURE(LECTURE_ID, TITLE, TEACHER_ID, INDEX_COUNT, CATEGORY, START_DATE, END_DATE)
VALUES (1, '자바 기초 완성', 1, 10, 'Java', '2025-01-10', '2025-02-28');

INSERT INTO LECTURE(LECTURE_ID, TITLE, TEACHER_ID, INDEX_COUNT, CATEGORY, START_DATE, END_DATE)
VALUES (2, 'SQL 마스터 과정', 2, 8, 'SQL', '2025-03-01', '2025-04-15');

INSERT INTO LECTURE(LECTURE_ID, TITLE, TEACHER_ID, INDEX_COUNT, CATEGORY, START_DATE, END_DATE)
VALUES (3, 'C# 윈도우 앱 개발', 3, 12, 'C#', '2025-02-01', '2025-03-20');

INSERT INTO LECTURE(LECTURE_ID, TITLE, TEACHER_ID, INDEX_COUNT, CATEGORY, START_DATE, END_DATE)
VALUES (4, '웹 개발 입문', 4, 9, 'HTML/CSS/JS', '2025-01-15', '2025-02-28');

INSERT INTO LECTURE(LECTURE_ID, TITLE, TEACHER_ID, INDEX_COUNT, CATEGORY, START_DATE, END_DATE)
VALUES (5, '파이썬 데이터 분석', 5, 11, 'Python', '2025-03-10', '2025-05-01');

SELECT * FROM LECTURE;

UPDATE LECTURE SET INDEX_COUNT = 10 WHERE LECTURE_ID = 1;

CREATE TABLE STUDENT(
    STUDENT_ID NUMBER PRIMARY KEY,
    NAME VARCHAR2(10) NOT NULL,
    GRADE NUMBER NOT NULL,
    EMAIL VARCHAR2(20),
    JOIN_DATE DATE
);

INSERT INTO STUDENT(STUDENT_ID, NAME, GRADE, EMAIL, JOIN_DATE)
VALUES (1001, '김서준', 1, 'seojoon1@gmail.com', '2024-03-01');

INSERT INTO STUDENT(STUDENT_ID, NAME, GRADE, EMAIL, JOIN_DATE)
VALUES (1002, '이지아', 2, 'jia.lee@gmail.com', '2023-09-01');

INSERT INTO STUDENT(STUDENT_ID, NAME, GRADE, EMAIL, JOIN_DATE)
VALUES (1003, '박도윤', 3, 'doyoon3@gmail.com', '2022-03-01');

INSERT INTO STUDENT(STUDENT_ID, NAME, GRADE, EMAIL, JOIN_DATE)
VALUES (1004, '최하은', 1, 'haeun.c@gmail.com', '2024-03-01');

INSERT INTO STUDENT(STUDENT_ID, NAME, GRADE, EMAIL, JOIN_DATE)
VALUES (1005, '정민준', 2, 'minjun.j@gmail.com', '2023-09-01');

SELECT * FROM STUDENT;

CREATE TABLE ENROLLMENT(
    ENROLL_ID NUMBER PRIMARY KEY,
    STUDENT_ID NUMBER,
    LECTURE_ID NUMBER,
    ENROLL_DATE DATE,
    STATUS CHAR(1) CHECK(STATUS IN ('Y','N')),
    GRADE_SCORE NUMBER,
    FOREIGN KEY(STUDENT_ID) REFERENCES STUDENT ON DELETE CASCADE,
    FOREIGN KEY(LECTURE_ID) REFERENCES LECTURE ON DELETE CASCADE
);

INSERT INTO ENROLLMENT VALUES (1, 1001, 1, '2024-03-01', 'Y', 90);
INSERT INTO ENROLLMENT VALUES (2, 1001, 2, '2024-03-03', 'Y', 85);
INSERT INTO ENROLLMENT VALUES (3, 1001, 3, '2024-03-05', 'Y', 92);
)
INSERT INTO ENROLLMENT VALUES (4, 1002, 1, '2024-03-02', 'Y', 80);
INSERT INTO ENROLLMENT VALUES (5, 1002, 4, '2024-03-06', 'N', NULL); 
INSERT INTO ENROLLMENT VALUES (6, 1002, 5, '2024-03-08', 'Y', 88);


INSERT INTO ENROLLMENT VALUES (7, 1003, 2, '2024-03-04', 'Y', 75);
INSERT INTO ENROLLMENT VALUES (8, 1003, 4, '2024-03-07', 'Y', 82);
INSERT INTO ENROLLMENT VALUES (9, 1003, 5, '2024-03-09', 'Y', 79);

INSERT INTO ENROLLMENT VALUES (10, 1004, 1, '2024-03-01', 'Y', 95);
INSERT INTO ENROLLMENT VALUES (11, 1004, 3, '2024-03-04', 'Y', 89);
INSERT INTO ENROLLMENT VALUES (12, 1004, 5, '2024-03-06', 'Y', 94);

INSERT INTO ENROLLMENT VALUES (13, 1005, 2, '2024-03-03', 'Y', 70);
INSERT INTO ENROLLMENT VALUES (14, 1005, 3, '2024-03-05', 'Y', 85);
INSERT INTO ENROLLMENT VALUES (15, 1005, 4, '2024-03-10', 'Y', 77);
INSERT INTO ENROLLMENT VALUES (16, 1005, 1, '2024-03-9', 'Y', 88);

DELETE FROM ENROLLMENT WHERE ENROLL_ID = 16;
UPDATE FROM 

SELECT * FROM ENROLLMENT;




